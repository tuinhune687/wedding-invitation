<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Invitation</title>
    <link rel="icon" href="./favicon/favicon-32x32.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&family=Roboto:wght@400;700&family=Ranchers&family=Bungee&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/css/splide.min.css" />
</head>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    text-align: center;
    font-family: 'Roboto', sans-serif;
    background-color: #f8f8f8;
    line-height: 1.6;
}

h1, h5 {
    animation: pulse 2s infinite ease-in-out;
    font-family: 'Ranchers', cursive;
    font-size: 30px;
    color: #C1272D;
    font-weight: bold;
    margin: 10px 0;
    line-height: 1.2;
}

.container {
    margin: auto; /* Căn giữa trang */
    background: none;
    border-radius: 10px; /* Bo góc nhẹ */
    box-shadow: none;
    border: none;
    display: flex;
    flex-direction: column; /* Xếp dọc */
    align-items: center; /* Căn giữa */
    width: 100%; /* Chiều rộng bằng 100% màn hình */
    padding: 10px; /* Chừa khoảng trống hai bên */
}

.card {
    width: 90%; /* Chiếm 90% chiều rộng màn hình */
    max-width: 600px; /* Không to hơn 600px trên màn hình lớn */
    padding: 20px;
    margin-bottom: 10px; /* Chừa khoảng cách giữa các thẻ */
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.container img {
    width: 100%;
    max-width: 600px; /* Giữ ảnh không quá to */
    height: auto;
    object-fit: contain;
    image-rendering: crisp-edges;
    image-rendering: -webkit-optimize-contrast;
    padding: 10px;
}

.section {
    width: 100%;
    max-width: 600px; /* Đảm bảo không bị quá rộng */
    height: auto;
    display: block;
    margin: 0 auto; /* Căn giữa */
    object-fit: contain;
}

.visible {
    opacity: 1;
    transform: scale(1) translateY(0);
}

.music-container {
    position: fixed;
    bottom: -10px;
    right: -20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px; /* Khoảng cách giữa icon và text */
    opacity: 0.9; /* Độ trong suốt */
    border-radius: 50px;
    padding: 15px 25px; /* Điều chỉnh khoảng cách cho đẹp */
    font-weight: regular;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    z-index: 1000; /* Đảm bảo không bị che */
    max-width: 200px; /* Giữ kích thước hợp lý trên màn hình nhỏ */
    will-change: transform;
}

#vinyl {
    width: 80px;
    height: 80px;
    transition: transform 0.5s ease-in-out;
}

.spin {
    animation: rotate 3s linear infinite;
}

@keyframes rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.falling-heart {
    position: fixed;
    top: 0;
    left: calc(10% + 80% * var(--random-x)); /* Ngẫu nhiên vị trí ngang */
    font-size: 30px;
    color: red;
    animation: fall 5s linear infinite;
    opacity: 0.8;
    will-change: transform, opacity;
}

@keyframes fall {
    0% { 
        transform: translateY(-10px) translateX(0) scale(0.8); 
        opacity: 1; 
    }
    50% { 
        transform: translateY(50vh) translateX(10px) scale(1); 
    }
    100% { 
        transform: translateY(100vh) translateX(-10px) scale(1.2); 
        opacity: 0; 
    }
}

@keyframes megaphone-shake {
    0% { transform: scale(1) rotate(0); }
    10% { transform: scale(1.01) rotate(-1deg); }
    20% { transform: scale(1.04) rotate(2deg); }
    30% { transform: scale(1.03) rotate(-1deg); }
    40% { transform: scale(1.04) rotate(2deg); }
    50% { transform: scale(1) rotate(0); }
}

.megaphone-effect {
    animation: megaphone-shake 1s infinite ease-in-out;
}

.image-container {
    position: relative;
    display: flex;  
    flex-direction: column; /* Xếp ảnh theo chiều dọc */
    justify-content: center; /* Căn giữa theo chiều dọc */
    align-items: center; /* Căn giữa theo chiều ngang */
    width: 100%;  
    gap: 5px; /* Điều chỉnh khoảng cách giữa các ảnh */
}

.address-image {
    width: 100%;
    max-width: 500px; /* Điều chỉnh kích thước theo ảnh */
    height: auto;
    display: block;
}

.map-button {
    position: absolute;
    top: 48%; /* Đặt vị trí giữa ảnh */
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 12px 20px;
    background-color: #4CAF50;
    color: white;
    text-decoration: none;
    font-weight: bold;
    border-radius: 8px;
    box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
    font-size: 16px;
    text-align: center;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.map-button:hover {
    background-color: #388E3C;
    transform: translate(-50%, -50%) scale(1.1);
}

.guestbook-container {
    max-width: 550px; /* Để khung không lớn hơn ảnh */
    width: 100%; /* Chỉnh theo kích thước ảnh */
    height: auto; /* Để nội dung không bị cắt */
    margin: 20px auto;
    padding: 25px;
    background: #C1272D; /* Giữ nguyên nền */
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    text-align: center;
    color: white;
    display: flex;  
    flex-direction: column; /* Xếp ảnh theo chiều dọc */
    justify-content: center; /* Căn giữa theo chiều dọc */
    align-items: center; /* Căn giữa theo chiều ngang */
}

.guestbook-container h2, .guestbook-container h3 {
    font-family: 'Dancing Script', cursive;
    font-size: 40px; /* Nhỏ hơn để không bị to quá */
    margin-bottom: 10px;
}

.guestbook-container p {
    font-size: 16px;
    color: #fff8dc;
    margin-bottom: 15px;
}

.guestbook-container input, .guestbook-container textarea {
    width: 100%;
    margin: 8px 0;
    padding: 12px;
    border: 1px solid #FFFFFF;
    border-radius: 8px;
    font-size: 18px;
    background: white;
    color: #8B0000;
    text-align: center;
}

.guestbook-container textarea {
    min-height: 80px;
}

.guestbook-container button {
    background: #FFFFFF;
    color: #8B0000;
    padding: 15px 25px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 20px;
    font-weight: bold;
    transition: 0.3s;
    margin-top: 10px;
}

.guestbook-container button:hover {
    background: #fff8dc;
}

.guestbook-container button:active {
    transform: scale(0.95);
}

#guestbookMessages {
    max-height: 250px; /* Giảm chiều cao để vừa hơn */
    margin-top: 15px;
    text-align: left;
    overflow-y: auto;
    padding: 10px;
    border: 2px solid #ff6b6b;
    border-radius: 10px;

    scrollbar-width: thin;     /* Thanh cuộn mỏng */
    scrollbar-color: #ff6b6b #f8f8f8; /* Màu thanh cuộn và nền */
}

.message {
    background: #FFFFFF;
    padding: 15px;
    margin: 8px 0;
    font-size: 18px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    border-left: 4px solid white;
    color: #808080;
    font-family: 'Roboto', cursive;
}

.message strong {
    color: #C1272D;
    font-size: 22px;
    font-family: 'Roboto', cursive;
}

@media (max-width: 768px) {
  .guestbook-container {
    width: 90%; /* Giúp nó nhỏ hơn một chút để vừa vặn */
    max-width: 400px; /* Đảm bảo không quá rộng */
    padding: 10px; /* Giảm khoảng cách bên trong */
    font-size: 14px; /* Thu nhỏ chữ để phù hợp */
  }

.thank-you {
    font-size: 1.2rem;
    font-weight: bold;
    color: #C1272D;
    font-family: 'Ranchers', cursive;
    margin: -40px 0;
}

.splide {
    max-width: 80%; /* Giới hạn chiều rộng slider */
    margin: auto; /* Căn giữa */
}

.splide__slide img {
    width: 90%; /* Ảnh full khung */
    margin: 0 auto; /* Canh giữa ảnh */
}

.splide__arrow {
    z-index: 10; /* Đảm bảo mũi tên không bị che */
}

.title {
    text-align: center;
    font-size: 24px;
    margin: 20px 0;
}

/* CSS cho điện thoại (màn hình nhỏ hơn 768px) */
@media (max-width: 768px) {
  body {
    background-size: cover;
  }

  img {
    width: 100%; /* Ảnh sẽ vừa đủ chiều rộng màn hình */
    height: auto;
  }

  html, body {
    width: 100%;
    overflow-x: hidden; /* Ẩn thanh cuộn ngang nhưng không làm mất ảnh */
  }

  .splide {
    display: block !important;
    max-width: 100% !important;
  }

  .splide__slide img {
    width: 100%;
    height: auto;
    display: block; /* Đảm bảo ảnh không bị ẩn */
  }
}
</style>
</head>

<body>
<div id="music-container" class="music-container">
    <img id="vinyl" src="vinyl.png" alt="Vinyl Record" width="50">
    <audio id="audio" src="tung-ngay-yeu-em.mp3"></audio>
</div>

<div class="image-container">
    <img src="1.png" class="section" alt="WeddingPhotos">
    <img src="2.png" class="section megaphone-effect" alt="WeddingStory">
</div>

<div id="slider1" class="splide">
    <div class="splide__track">
        <ul class="splide__list">
            <li class="splide__slide"><img src="3.png" alt="Ảnh 3"></li>
            <li class="splide__slide"><img src="3-1.png" alt="Ảnh 3-1"></li>
        </ul>
    </div>
</div>

<h5 class="wedding-title">Wedding Photos</h5>

<div id="slider2" class="splide">
    <div class="splide__track">
        <ul class="splide__list">
            <li class="splide__slide"><img src="4.png" alt="Ảnh 4"></li>
            <li class="splide__slide"><img src="4-1.png" alt="Ảnh 4-1"></li>
            <li class="splide__slide"><img src="4-2.png" alt="Ảnh 4-2"></li>
        </ul>
    </div>
</div>

<div class="image-container">
    <img src="5.png" class="section" alt="WeddingPhotos">
    <img src="6.png" class="section" alt="Lễ Gia Tiên">
    <img src="7.png" class="section" alt="AncestralCeremonyInfo">
    <img src="8.png" class="section" alt="WeddingParty">
    <img src="9.png" class="section" alt="WeddingPartyInfo">
</div>

<div class="image-container">
        <img src="10.png" class="section" alt="AddressInfo">
        <a href="https://maps.app.goo.gl/1nqnptA3AvdbYdVP9" target="_blank" class="map-button">
            GU GỒ MAP Ở ĐÂY NÈ
        </a>
    </div>
</div>

<div class="guestbook-container">
    <h2>Sổ Lưu Bút</h2>
    <p>Tụi mình sẽ rất vui nếu như nhận được lời chúc từ mọi người đó ʕっ•ᴥ•ʔっ</p>
    <input type="text" id="guestName" placeholder="Nhập tên của bạn">
    <textarea id="guestMessage" placeholder="Nhập lời chúc"></textarea>
    <button onclick="sendMessage()">Gửi đi đừng ngại</button>
    <h3>Nhật Ký Kỷ Niệm</h3>
    <div id="guestbookMessages"></div>
</div>

<div class="wedding-gift-box">
    <h1 class="gift-title">Wedding Gift Box</h1>
</div>
<div class="image-container">
    <img src="11.png" class="section" alt="QRCODEINFO">
    <a href="https://your-payment-link.com" target="_blank">
    </a>
    </div>
</div>

<script>

document.addEventListener("DOMContentLoaded", function () {
    function createHeart() {
        const heart = document.createElement("div");
        heart.className = "falling-heart";
        heart.innerHTML = "❤️";

        let size = Math.random() * 20 + 10; // 10px - 30px
        heart.style.fontSize = size + "px";

        heart.style.left = Math.random() * 100 + "vw";

        const colors = ["#ff4d4d", "#ff66a3", "#ff3385"];
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];

        heart.style.animationDuration = Math.random() * 3 + 2 + "s";

        document.body.appendChild(heart);
        setTimeout(() => {
            heart.remove();
        }, 5000);
    }

    setInterval(() => {
        if (document.querySelectorAll(".falling-heart").length < 20) {
            createHeart();
        }
    }, 1500);
});

setInterval(() => {
    let maxHearts = window.innerWidth < 768 ? 10 : 20; // Mobile: 10, Desktop: 20
    if (document.querySelectorAll(".falling-heart").length < maxHearts) {
        createHeart();
    }
}, 1500);

document.addEventListener("DOMContentLoaded", function () {
    const sections = document.querySelectorAll(".section");
    function revealSections() {
        sections.forEach(section => {
            const sectionTop = section.getBoundingClientRect().top;
            const windowHeight = window.innerHeight;
            if (sectionTop < windowHeight - 100) {
                section.classList.add("visible");
            }
        });
    }
    window.addEventListener("scroll", revealSections); 
    revealSections();
});

let isPlaying = false;
const audio = document.getElementById("audio");
const vinyl = document.getElementById("vinyl");
const musicContainer = document.getElementById("music-container");

musicContainer.addEventListener("click", () => {
    if (isPlaying) {
        audio.pause();
    } else {
        audio.play();
    }
});

audio.addEventListener("play", () => {
    isPlaying = true;
    vinyl.classList.add("spin"); // Đĩa nhạc xoay khi phát
});

audio.addEventListener("pause", () => {
    isPlaying = false;
    vinyl.classList.remove("spin"); // Dừng xoay khi tạm dừng
});
</script>


    <!-- Thêm Firebase SDK -->
    <script type="module">
const isAdmin = true; // 🔥 Đổi thành false nếu không phải admin
// Import Firebase SDK
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } from
"https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyDgyb1-VrK7flWVXlha8vEapS0BonKKDOU",
    authDomain: "wedding-invitation-1b3c8.firebaseapp.com",
    projectId: "wedding-invitation-1b3c8",
    storageBucket: "wedding-invitation-1b3c8.appspot.com",
    messagingSenderId: "440194839662",
    appId: "1:440194839662:web:bbb00404a14259779ca27f"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Hàm gửi lời chúc vào Firestore
async function sendMessage() {
    console.log("🔥 Hàm sendMessage() đã được gọi");

// Lấy dữ liệu từ ô nhập
    const name = document.getElementById("guestName").value;
    const message = document.getElementById("guestMessage").value;

// Kiểm tra nếu chưa nhập đủ thì cảnh báo
    if (!name || !message) {
        console.warn("⚠️ Vui lòng nhập tên và lời chúc!");
        return;
    }

    try {
        console.log("📤 Đang lưu vào Firestore...");
        const docRef = await addDoc(collection(db, "guestbook"), {
            name: name,
            message: message,
            timestamp: serverTimestamp(),
        });
        console.log("✅ Gửi thành công! ID: ", docRef.id);

// Xóa nội dung nhập sau khi gửi thành công
        document.getElementById("guestName").value = "";
        document.getElementById("guestMessage").value = "";

    } catch (error) {
        console.error("❌ Lỗi khi gửi tin nhắn: ", error);
    }
}

import { deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";

async function deleteMessage(messageId) {
    if (!confirm("Bạn có chắc chắn muốn xóa lời chúc này?")) return; // Xác nhận xóa

    try {
        await deleteDoc(doc(db, "guestbook", messageId));
        console.log("✅ Xóa thành công!");
    } catch (error) {
        console.error("❌ Lỗi khi xóa: ", error);
    }
}

// ✅ Lắng nghe thay đổi trong Firestore để cập nhật lời chúc theo thời gian thực
// Chỉ giữ một khai báo listenMessages duy nhất!
function listenMessages() {
    const messagesRef = collection(db, "guestbook");
    onSnapshot(messagesRef, (snapshot) => {
    const messageContainer = document.getElementById("guestbookMessages");
    messageContainer.innerHTML = ""; // Xóa nội dung cũ trước khi cập nhật
    snapshot.forEach((doc) => {
            const msg = doc.data();
            const messageId = doc.id;
            const div = document.createElement("div");
            div.classList.add("message");
            div.innerHTML = `<strong>${msg.name}:</strong> ${msg.message}`;

// Nếu là admin, thêm nút xóa
if (isAdmin) {
   const deleteBtn = document.createElement("button");
   deleteBtn.textContent = "❌";
   deleteBtn.style.position = "absolute"; // Đặt vị trí tuyệt đối
   deleteBtn.style.top = "5px";// Đưa nút lên sát mép trên
   deleteBtn.style.right = "5px";// Đưa nút sang sát mép phải
   deleteBtn.style.background = "white";
   deleteBtn.style.color = "red";
   deleteBtn.style.border = "none";
   deleteBtn.style.padding = "5px 10px";
   deleteBtn.style.borderRadius = "50%";  // Làm tròn nút
   deleteBtn.style.fontSize = "10px";      // Giảm kích thước chữ
   deleteBtn.style.width = "16px";        // Kích thước nút nhỏ gọn
   deleteBtn.style.height = "16px";       
   deleteBtn.style.display = "flex";
   deleteBtn.style.alignItems = "center";
   deleteBtn.style.justifyContent = "center";
   deleteBtn.style.cursor = "pointer";
   deleteBtn.onclick = () => deleteMessage(messageId);
   div.style.position = "relative";
   div.appendChild(deleteBtn);
}
   messageContainer.appendChild(div);
});
});
}

// Đảm bảo các hàm có thể gọi từ HTML
document.addEventListener("DOMContentLoaded", () => {
    window.sendMessage = sendMessage;
    listenMessages(); // Lắng nghe tin nhắn khi trang tải
});
    </script>

    <footer class="thank-you">
        <p> Thank You Vinamilk !</p>
    </footer>

<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/js/splide.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    new Splide("#slider1", {
        type: "loop",     // Lặp lại khi hết ảnh
        perPage: 1,       // Hiển thị 1 ảnh mỗi lần
        arrows: true,     // Hiện mũi tên điều hướng
        pagination: false // Ẩn chấm tròn chuyển ảnh
    }).mount();

    new Splide("#slider2", {
        type: "loop",
        perPage: 1,
        arrows: true,
        pagination: false
    }).mount();
});
</script>
</body>
</html>
